---
import Base from '../layouts/Base.astro';
import { getSortedPosts } from '../lib/posts';

const optimizedItems = await getSortedPosts();
---

<Base title="Writing" description="Ideas, guides, and project write-ups." activePage="writing">
  <div class="page-header">
    <h1 class="page-title">Writing</h1>
    <p class="page-description">Ideas, guides, and project write-ups.</p>
  </div>

  <div class="content-list">
    {optimizedItems.map((item, i) => (
      <a class={`content-item${i === 0 ? ' featured' : ''}`} href={item.href}>
        {item.image && <div class="item-bg" {...(i === 0 ? { style: `background-image: url('${item.image}');` } : { 'data-bg': item.image })}></div>}
        <div class="item-left">
          <span class="item-tag">{item.tag}</span>
          <span class="item-title" transition:name={`title-${item.href.split('/').pop()}`}>{item.title}</span>
        </div>
        <div class="item-meta">{item.meta}</div>
        {i === 0 && item.description && <div class="featured-desc">{item.description}</div>}
      </a>
    ))}
  </div>
</Base>
